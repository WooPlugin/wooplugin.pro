---
interface Props {
  promotion?: {
    title: string;
    message: string;
    code?: string;
    style?: 'highlight' | 'subtle' | 'urgent';
    href?: string;
  };
}

const { promotion } = Astro.props;

const plugins = [
  {
    href: '/google-shopping',
    label: 'Google Shopping',
    description: 'Product feeds for WooCommerce',
    docsHref: '/docs/getting-started/installation',
    supportHref: '/support#google-shopping',
  },
  {
    href: '/accessibility-scanner',
    label: 'Accessibility Scanner',
    description: 'WCAG compliance for WordPress',
    docsHref: '/docs/accessibility/getting-started/installation',
    supportHref: '/support#accessibility-scanner',
  },
];

const navLinks = [
  { href: '/docs', label: 'Docs' },
  { href: '/guides', label: 'Guides' },
  { href: '/support', label: 'Support' },
];
---

<header class="fixed top-0 left-0 right-0 z-50 bg-white/95 backdrop-blur-sm border-b border-gray-100">
  {promotion && (
    <div class={`promo-banner promo-banner-${promotion.style || 'highlight'}`}>
      <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 flex items-center justify-center gap-3 flex-wrap text-sm">
        <span class="font-semibold">{promotion.title}:</span>
        <span>{promotion.message}</span>
        {promotion.code && (
          <code class="bg-white/20 px-2 py-0.5 rounded font-mono font-bold text-xs">{promotion.code}</code>
        )}
        <a href={promotion.href || '/google-shopping#pricing'} class="bg-white text-gray-900 px-3 py-1 rounded-full text-xs font-semibold hover:bg-gray-100 transition-colors">
          Claim Offer
        </a>
      </div>
    </div>
  )}
  <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex items-center justify-between h-16">
      <!-- Logo -->
      <a href="/" class="flex items-baseline">
        <span class="text-xl font-bold bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent">
          WooPlugin
        </span>
        <span class="text-sm font-medium text-text-muted">.pro</span>
      </a>

      <!-- Desktop Navigation -->
      <nav class="hidden md:flex items-center gap-8">
        <!-- Plugins Dropdown -->
        <div class="plugins-dropdown relative">
          <button type="button" class="text-sm font-medium text-text-muted hover:text-primary transition-colors inline-flex items-center gap-1">
            Plugins
            <svg class="w-3.5 h-3.5 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
            </svg>
          </button>
          <div class="plugins-dropdown-menu absolute top-full left-1/2 -translate-x-1/2 pt-2 opacity-0 invisible transition-all duration-150">
            <div class="bg-white rounded-xl border border-gray-200 shadow-lg p-2 min-w-[280px]">
              {plugins.map((plugin, i) => (
                <div class:list={[i > 0 && 'border-t border-gray-100 mt-1 pt-1']}>
                  <a
                    href={plugin.href}
                    class="flex flex-col gap-0.5 px-3 py-2.5 rounded-lg hover:bg-gray-50 transition-colors"
                  >
                    <span class="text-sm font-medium text-text">{plugin.label}</span>
                    <span class="text-xs text-text-muted">{plugin.description}</span>
                  </a>
                  <div class="flex gap-1 px-3 pb-2">
                    <a href={plugin.docsHref} class="text-xs text-text-muted hover:text-primary transition-colors">Docs</a>
                    <span class="text-xs text-gray-300">&middot;</span>
                    <a href={plugin.supportHref} class="text-xs text-text-muted hover:text-primary transition-colors">Support</a>
                  </div>
                </div>
              ))}
            </div>
          </div>
        </div>

        {navLinks.map(link => (
          <a
            href={link.href}
            class="text-sm font-medium text-text-muted hover:text-primary transition-colors"
          >
            {link.label}
          </a>
        ))}
      </nav>

      <!-- Action Buttons -->
      <div class="flex items-center gap-2">
        <a
          href="https://github.com/WooPlugin"
          target="_blank"
          rel="noopener noreferrer"
          class="inline-flex items-center justify-center w-9 h-9 text-text-muted hover:text-primary hover:bg-gray-100 rounded-lg transition-colors"
          title="View on GitHub"
        >
          <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
            <path d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z"/>
          </svg>
        </a>
        <a
          href="https://profiles.wordpress.org/w03d/"
          target="_blank"
          rel="noopener noreferrer"
          class="inline-flex items-center justify-center w-9 h-9 text-text-muted hover:text-primary hover:bg-gray-100 rounded-lg transition-colors"
          title="View on WordPress.org"
        >
          <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
            <path d="M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm-1.258 14.717L7.362 5.87c.542-.027 1.031-.08 1.031-.08.486-.054.429-.771-.057-.744 0 0-1.458.114-2.4.114-.168 0-.366-.005-.578-.014C6.924 2.586 9.29 1.2 12 1.2c2.02 0 3.862.773 5.243 2.04-.033-.002-.066-.007-.1-.007-.9 0-1.54.784-1.54 1.628 0 .757.437 1.4.9 2.157.35.614.757 1.4.757 2.537 0 .786-.3 1.7-.7 2.97l-.92 3.065-3.33-9.9c.543-.027 1.03-.08 1.03-.08.486-.054.43-.771-.056-.744 0 0-1.458.114-2.4.114-.166 0-.362-.004-.572-.013l4.946 14.692c-1.536.494-3.17.494-4.718-.027zM2.4 12c0-1.727.458-3.345 1.258-4.745l3.47 9.5C4.195 15.318 2.4 13.837 2.4 12zm18.345 1.2c0 .957-.357 2.042-.828 3.57l-1.084 3.628-3.93-11.684c.542-.027 1.03-.08 1.03-.08.485-.054.428-.771-.058-.744 0 0-.796.063-1.485.098.985-1.494 2.687-2.484 4.61-2.484.507 0 1 .057 1.474.162-.025.168-.047.343-.047.528 0 1.028.6 2.157 1.2 3.342.464.943.928 2.042.928 3.7l.19-.037z"/>
          </svg>
        </a>
        <a
          href="/#plugins"
          class="inline-flex items-center justify-center px-4 py-2 text-sm font-medium text-white bg-primary hover:bg-primary-dark rounded-lg transition-colors"
        >
          Get Started
        </a>
      </div>
    </div>
  </div>
</header>

<style>
  .plugins-dropdown:hover .plugins-dropdown-menu,
  .plugins-dropdown:focus-within .plugins-dropdown-menu {
    opacity: 1;
    visibility: visible;
  }

  .plugins-dropdown:hover button svg {
    transform: rotate(180deg);
  }

  .promo-banner {
    padding: 8px 0;
    text-align: center;
    color: white;
  }

  .promo-banner-urgent {
    background: linear-gradient(135deg, #dc2626 0%, #ea580c 100%);
  }

  .promo-banner-highlight {
    background: linear-gradient(135deg, #2563eb 0%, #7c3aed 100%);
  }

  .promo-banner-subtle {
    background: linear-gradient(135deg, #059669 0%, #0d9488 100%);
  }
</style>
